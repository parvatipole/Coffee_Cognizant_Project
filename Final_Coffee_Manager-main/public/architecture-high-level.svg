<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="1000" viewBox="0 0 1400 1000">
  <defs>
    <style>
      .title{font:bold 22px Arial,Helvetica,sans-serif;fill:#222}
      .subtitle{font:bold 16px Arial,Helvetica,sans-serif;fill:#333}
      .text{font:14px Arial,Helvetica,sans-serif;fill:#333}
      .box{fill:#fff;stroke:#cbd5e1;stroke-width:2;rx:12;ry:12}
      .cluster{fill:#f8fafc;stroke:#94a3b8;stroke-width:2;rx:16;ry:16}
      .arrow{stroke:#64748b;stroke-width:2;marker-end:url(#arrowhead)}
      .dashed{stroke-dasharray:6 6}
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
  </defs>

  <rect x="20" y="20" width="1360" height="960" fill="#ffffff" stroke="#e2e8f0"/>
  <text x="40" y="60" class="title">Coffee Manager – High-Level Architecture</text>

  <!-- Client -->
  <g id="client" transform="translate(40,100)">
    <rect class="cluster" x="0" y="0" width="620" height="400"/>
    <text x="20" y="30" class="subtitle">Client (Browser)</text>

    <rect class="box" x="20" y="50" width="280" height="90"/>
    <text x="40" y="80" class="text">UI Layer</text>
    <text x="40" y="100" class="text">React 18, React Router 6</text>
    <text x="40" y="120" class="text">TailwindCSS, Radix UI, Lucide</text>

    <rect class="box" x="320" y="50" width="280" height="90"/>
    <text x="340" y="80" class="text">API Client</text>
    <text x="340" y="100" class="text">fetch + zod validation</text>
    <text x="340" y="120" class="text">Fallback to mock/localStorage</text>

    <rect class="box" x="20" y="160" width="280" height="90"/>
    <text x="40" y="190" class="text">State &amp; Storage</text>
    <text x="40" y="210" class="text">React Hooks + LocalStorage</text>

    <rect class="box" x="320" y="160" width="280" height="110"/>
    <text x="340" y="190" class="text">Data Manager</text>
    <text x="340" y="210" class="text">LocalStorage persistence</text>
    <text x="340" y="230" class="text">Auto-sync when backend available</text>

    <rect class="box" x="20" y="270" width="580" height="90"/>
    <text x="40" y="300" class="text">Static Assets</text>
    <text x="40" y="320" class="text">public/ (icons, images)</text>

    <!-- inner arrows -->
    <line class="arrow" x1="160" y1="95" x2="320" y2="95"/>
    <line class="arrow" x1="160" y1="95" x2="160" y2="205"/>
    <line class="arrow" x1="460" y1="95" x2="460" y2="205"/>
  </g>

  <!-- Dev Server -->
  <g id="devserver" transform="translate(700,100)">
    <rect class="cluster" x="0" y="0" width="320" height="220"/>
    <text x="20" y="30" class="subtitle">Dev Server (Local Dev)</text>

    <rect class="box" x="20" y="50" width="280" height="70"/>
    <text x="40" y="80" class="text">Vite Dev Server</text>
    <text x="40" y="100" class="text">HMR, static serving</text>

    <rect class="box" x="20" y="130" width="280" height="70"/>
    <text x="40" y="160" class="text">API Stubs (server/index.ts)</text>
    <text x="40" y="180" class="text">Route skeletons for /api/*</text>
  </g>

  <!-- Backend -->
  <g id="backend" transform="translate(700,360)">
    <rect class="cluster" x="0" y="0" width="320" height="320"/>
    <text x="20" y="30" class="subtitle">Backend Integration (When available)</text>

    <rect class="box" x="20" y="50" width="280" height="80"/>
    <text x="40" y="80" class="text">REST API Endpoints</text>
    <text x="40" y="100" class="text">/api/auth/*, /api/machines/*</text>

    <rect class="box" x="20" y="140" width="280" height="60"/>
    <text x="40" y="170" class="text">Authentication</text>

    <rect class="box" x="20" y="210" width="280" height="60"/>
    <text x="40" y="240" class="text">Database (Postgres/Neon)</text>

    <rect class="box" x="20" y="280" width="280" height="40"/>
    <text x="40" y="305" class="text">Monitoring/Analytics (optional)</text>
  </g>

  <!-- Build & Deploy -->
  <g id="build" transform="translate(40,540)">
    <rect class="cluster" x="0" y="0" width="620" height="200"/>
    <text x="20" y="30" class="subtitle">Build &amp; Deployment</text>

    <rect class="box" x="20" y="50" width="180" height="60"/>
    <text x="40" y="85" class="text">vite build → dist/</text>

    <rect class="box" x="220" y="50" width="180" height="60"/>
    <text x="240" y="85" class="text">vite preview / npm start</text>

    <rect class="box" x="420" y="50" width="180" height="60"/>
    <text x="440" y="85" class="text">CDN/Hosting</text>

    <line class="arrow" x1="200" y1="80" x2="220" y2="80"/>
    <line class="arrow" x1="400" y1="80" x2="420" y2="80"/>
  </g>

  <!-- Realtime (optional) -->
  <g id="realtime" transform="translate(40,760)">
    <rect class="cluster" x="0" y="0" width="620" height="180"/>
    <text x="20" y="30" class="subtitle">Realtime (optional)</text>
    <rect class="box" x="20" y="50" width="580" height="60"/>
    <text x="40" y="85" class="text">MQTT/WebSocket (lib/mqtt.ts)</text>
  </g>

  <!-- External flow labels -->
  <text x="375" y="210" class="text">UI ↔ State</text>

  <!-- Inter-group arrows -->
  <line class="arrow" x1="620" y1="195" x2="700" y2="195"/>
  <text x="640" y="185" class="text">/api/* during dev</text>

  <line class="arrow" x1="620" y1="235" x2="700" y2="435"/>
  <text x="630" y="340" class="text">/api/* in prod</text>

  <line class="arrow dashed" x1="560" y1="250" x2="360" y2="430"/>
  <text x="380" y="360" class="text">Fallback when backend unavailable</text>

  <line class="arrow" x1="250" y1="640" x2="250" y2="500"/>
  <text x="260" y="580" class="text">Static assets → UI</text>
</svg>
